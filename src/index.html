<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TD OSC Control Panel</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <style>
    body{font-family:sans-serif;background:#222;color:#eee;padding:2rem;max-width:700px;margin:auto}
    h2{margin-top:2rem;border-bottom:1px solid #444}
    label{display:block;margin:1rem 0 .4rem}
    input[type=range]{width:100%}
    .btn{display:inline-block;margin:.35rem .4rem;padding:.6rem 1rem;
         background:#555;border:0;border-radius:4px;color:#fff;cursor:pointer}
    .btn.danger{background:#b22222}
    .btn:hover{opacity:0.8}
    #status{margin-top:1rem;padding:0.5rem;background:#333;border-radius:4px;font-family:monospace;font-size:0.9em}
  </style>
</head>
<body>
  <h1>TD OSC Control Panel</h1>
  <div id="status">Ready - waiting for interaction...</div>

  <!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ VOLUME SLIDERS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <h2>Volume</h2>
  <label>BIRDS (<span id="lbl_birds">0.50</span>)</label>
  <input type="range" id="vol_birds"  min="0" max="1" step="0.05" value="0.5" data-topic="/vol_birds">

  <label>AMBI (<span id="lbl_ambi">0.50</span>)</label>
  <input type="range" id="vol_ambi"   min="0" max="1" step="0.05" value="0.5" data-topic="/vol_ambi">

  <label>GLOBAL (<span id="lbl_global">0.50</span>)</label>
  <input type="range" id="vol_global" min="0" max="1" step="0.05" value="0.5" data-topic="/vol_global">

  <!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ PLAYBACK ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <h2>Playback</h2>
  <button type="button" class="btn" data-topic="/special_nature" data-val="1">GARDEN</button>
  <button type="button" class="btn" data-topic="/special" data-val="1">DUDUK</button>
  <button type="button" class="btn" data-topic="/normal" data-val="1">NORMAL</button>
  <button type="button" class="btn" data-topic="/stop" data-val="1">STOP</button>

  <!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ TRACK SELECT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <h2>Tracks</h2>
  <button type="button" class="btn" data-topic="/hotelcalifornia" data-val="1">Hotel California</button>
  <button type="button" class="btn" data-topic="/likeavirgin"     data-val="1">Like a Virgin</button>
  <button type="button" class="btn" data-topic="/prettygirlrock"  data-val="1">Pretty Girl Rock</button>

  <!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ SYSTEM ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <h2>System</h2>
  <button type="button" class="btn danger" data-topic="/reboot"   data-val="1">REBOOT</button>
  <button type="button" class="btn danger" data-topic="/shutdown" data-val="1">SHUT DOWN</button>
  
  <!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ SYNC MODE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <h2>Sync Mode</h2>
  <button type="button" class="btn" data-topic="/sync" data-val="1">SYNC</button>
  <button type="button" class="btn" data-topic="/async" data-val="1">ASYNC</button>

  <script>
    const statusEl = document.getElementById('status');
    
    function updateStatus(msg) {
      statusEl.textContent = msg;
      console.log(msg);
    }

    /* ---- send helper using GET parameters ---- */
    function send(topic, value){
      const url = '/set?topic=' + encodeURIComponent(topic) + '&value=' + encodeURIComponent(value);
      
      console.log('üì§ Sending:', topic, '=', value);
      console.log('üì§ URL:', url);
      updateStatus('Sending: ' + topic + ' = ' + value);
      
      fetch(url)
        .then(function(res) {
          console.log('üì• Response status:', res.status);
          return res.text();
        })
        .then(function(data) {
          console.log('üì• Response data:', data);
          updateStatus('‚úì ' + data);
        })
        .catch(function(err) {
          console.error('‚ùå Fetch error:', err);
          updateStatus('‚ùå Error: ' + err.message);
        });
    }

    /* sliders */
    document.querySelectorAll('input[type=range]').forEach(function(sl){
      const lbl = document.getElementById('lbl_' + sl.id.split('_')[1]);
      sl.addEventListener('input', function(e){
        const v = e.target.value;
        lbl.textContent = v;
        send(sl.dataset.topic, v);
      });
    });

    /* buttons */
    document.querySelectorAll('.btn[data-topic]').forEach(function(btn){
      btn.addEventListener('click', function(){
        console.log('üñ±Ô∏è Button clicked:', btn.textContent);
        send(btn.dataset.topic, btn.dataset.val);
      });
    });
    
    console.log('‚úÖ Page loaded and ready!');
  </script>
</body>
</html>
